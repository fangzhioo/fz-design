import{d as $,M as Z,h as u,g as y,a3 as Y,j as q,o as E,b as R,w as G,a4 as ee,k as O,n as A,N as W,a5 as te,T as ae,c as J,H as X,F as le,x as j,a6 as oe,a7 as se,O as D,Y as re,a8 as ne,B as ie,r as ce,I as ue,e as fe}from"./framework.d8bfc5f0.js";import{t as ve,o as F,b as K,i as me,c as z,d as U,e as de,w as V}from"./dom.a5f17c5c.js";const he=c=>(c.install=i=>{const{name:o}=c;o&&i.component(o,c)},c),b=4,pe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},be=({move:c,size:i,bar:o})=>({[o.size]:i,transform:`translate${o.axis}(${c}%)`}),Q=Symbol("scrollbarContextKey"),ye={vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean},ge="Thumb",I=$({__name:"thumb",props:ye,setup(c){const i=c,o=Z(Q);o||ve(ge,"can not inject scrollbar context");const a=u(),v=u(),d=u({}),s=u(!1);let m=!1,l=!1,h=me?document.onselectstart:null;const t=y(()=>pe[i.vertical?"vertical":"horizontal"]),_=y(()=>be({size:i.size,move:i.move,bar:t.value})),p=y(()=>a.value[t.value.offset]**2/o.wrapElement[t.value.scrollSize]/i.ratio/v.value[t.value.offset]),H=r=>{var e;if(r.stopPropagation(),r.ctrlKey||[1,2].includes(r.button))return;(e=window.getSelection())==null||e.removeAllRanges(),P(r);const n=r.currentTarget;n&&(d.value[t.value.axis]=n[t.value.offset]-(r[t.value.client]-n.getBoundingClientRect()[t.value.direction]))},k=r=>{if(!v.value||!a.value||!o.wrapElement)return;const n=Math.abs(r.target.getBoundingClientRect()[t.value.direction]-r[t.value.client]),e=v.value[t.value.offset]/2,f=(n-e)*100*p.value/a.value[t.value.offset];o.wrapElement[t.value.scroll]=f*o.wrapElement[t.value.scrollSize]/100},P=r=>{r.stopImmediatePropagation(),m=!0,document.addEventListener("mousemove",T),document.addEventListener("mouseup",g),h=document.onselectstart,document.onselectstart=()=>!1},T=r=>{if(!a.value||!v.value||m===!1)return;const n=d.value[t.value.axis];if(!n)return;const e=(a.value.getBoundingClientRect()[t.value.direction]-r[t.value.client])*-1,f=v.value[t.value.offset]-n,S=(e-f)*100*p.value/a.value[t.value.offset];o.wrapElement[t.value.scroll]=S*o.wrapElement[t.value.scrollSize]/100},g=()=>{m=!1,d.value[t.value.axis]=0,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",g),N(),l&&(s.value=!1)},w=()=>{l=!1,s.value=!!i.size},C=()=>{l=!0,s.value=m};Y(()=>{N(),document.removeEventListener("mouseup",g)});const N=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return q(()=>{F(o.scrollbarElement,"mousemove",w),F(o.scrollbarElement,"mouseleave",C)}),Y(()=>{K(o.scrollbarElement,"mousemove",w),K(o.scrollbarElement,"mouseleave",C)}),(r,n)=>(E(),R(ae,{name:"fz-scrollbar-fade"},{default:G(()=>[ee(O("div",{ref_key:"instance",ref:a,class:A(["fz-scrollbar__bar",{[`is-${t.value.key}`]:!!t.value.key}]),onMousedown:k},[O("div",{ref_key:"thumb",ref:v,class:"fz-scrollbar__thumb",style:W(_.value),onMousedown:H},null,36)],34),[[te,r.always||s.value]])]),_:1}))}}),we={always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}},Se=$({__name:"bar",props:we,setup(c,{expose:i}){const o=c,a=u(0),v=u(0);return i({handleScroll:s=>{if(s){const m=s.offsetHeight-b,l=s.offsetWidth-b;v.value=s.scrollTop*100/m*o.ratioY,a.value=s.scrollLeft*100/l*o.ratioX}}}),(s,m)=>(E(),J(le,null,[X(I,{move:a.value,ratio:s.ratioX,size:s.width,always:s.always},null,8,["move","ratio","size","always"]),X(I,{move:v.value,ratio:s.ratioY,size:s.height,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}}),ze={height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:[String,Object,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String}},Ee={scroll:({scrollTop:c,scrollLeft:i})=>[c,i].every(z)},x="FzScrollbar",_e=$({name:x,__name:"scrollbar",props:ze,emits:Ee,setup(c,{expose:i,emit:o}){const a=c,v=o;let d,s;const m=u(),l=u(),h=u(),t=u("0"),_=u("0"),p=u(),H=u(1),k=u(1),P=y(()=>{const e={};return a.height&&(e.height=U(a.height)),a.maxHeight&&(e.maxHeight=U(a.maxHeight)),[a.wrapStyle,e]}),T=y(()=>[a.wrapClass,"fz-scrollbar__wrap",{"fz-scrollbar__wrap--hidden-default":!a.native}]),g=y(()=>["fz-scrollbar__view",a.viewClass]),w=()=>{var e;l.value&&((e=p.value)==null||e.handleScroll(l.value),v("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function C(e,f){l.value&&(de(e)?l.value.scrollTo(e):z(e)&&z(f)&&l.value.scrollTo(e,f))}const N=e=>{if(!z(e)){V(x,"value must be a number");return}l.value.scrollTop=e},r=e=>{if(!z(e)){V(x,"value must be a number");return}l.value.scrollLeft=e},n=()=>{if(!l.value)return;const e=l.value.offsetHeight-b,f=l.value.offsetWidth-b,S=e**2/l.value.scrollHeight,M=f**2/l.value.scrollWidth,B=Math.max(S,a.minSize),L=Math.max(M,a.minSize);H.value=S/(e-S)/(B/(e-B)),k.value=M/(f-M)/(L/(f-L)),_.value=B+b<e?`${B}px`:"",t.value=L+b<f?`${L}px`:""};return j(()=>a.noresize,e=>{e?(d==null||d(),s==null||s()):({stop:d}=oe(h,n),s=se("resize",n))},{immediate:!0}),j(()=>[a.maxHeight,a.height],()=>{a.native||D(()=>{var e;n(),l.value&&((e=p.value)==null||e.handleScroll(l.value))})}),re(Q,ne({scrollbarElement:m,wrapElement:l})),q(()=>{a.native||D(()=>{n()})}),ie(()=>n()),i({wrapRef:l,update:n,scrollTo:C,setScrollTop:N,setScrollLeft:r,handleScroll:w}),(e,f)=>(E(),J("div",{ref_key:"scrollbarRef",ref:m,class:"fz-scrollbar"},[O("div",{ref_key:"wrapRef",ref:l,class:A(T.value),style:W(P.value),onScroll:w},[(E(),R(ue(e.tag),{id:e.id,ref_key:"resizeRef",ref:h,class:A(g.value),style:W(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:G(()=>[ce(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?fe("",!0):(E(),R(Se,{key:0,ref_key:"barRef",ref:p,height:_.value,width:t.value,always:e.always,"ratio-x":k.value,"ratio-y":H.value},null,8,["height","width","always","ratio-x","ratio-y"]))],512))}}),Te=he(_e);export{Te as F,he as i};
