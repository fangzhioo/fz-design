import{d as $,M as Z,h as i,g as y,ad as Y,j as q,o as E,b as R,w as G,a6 as ee,k as O,n as A,N as W,aa as te,T as ae,c as J,H as j,F as le,x as X,ae as oe,af as se,O as D,Y as re,a2 as ne,B as ie,r as ce,I as ue,e as fe}from"./framework.f91504f0.js";import{t as ve,o as F,j as K,i as me,d as z,f as U,c as de,w as V}from"./dom.1ddecdbe.js";import{b as he}from"./index.b1089a6f.js";const b=4,pe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},be=({move:m,size:c,bar:s})=>({[s.size]:c,transform:`translate${s.axis}(${m}%)`}),Q=Symbol("scrollbarContextKey"),ye={vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean},ge="Thumb",I=$({__name:"thumb",props:ye,setup(m){const c=m,s=Z(Q);s||ve(ge,"can not inject scrollbar context");const a=i(),f=i(),d=i({}),o=i(!1);let v=!1,l=!1,h=me?document.onselectstart:null;const t=y(()=>pe[c.vertical?"vertical":"horizontal"]),_=y(()=>be({size:c.size,move:c.move,bar:t.value})),p=y(()=>a.value[t.value.offset]**2/s.wrapElement[t.value.scrollSize]/c.ratio/f.value[t.value.offset]),H=r=>{var e;if(r.stopPropagation(),r.ctrlKey||[1,2].includes(r.button))return;(e=window.getSelection())==null||e.removeAllRanges(),P(r);const n=r.currentTarget;n&&(d.value[t.value.axis]=n[t.value.offset]-(r[t.value.client]-n.getBoundingClientRect()[t.value.direction]))},k=r=>{if(!f.value||!a.value||!s.wrapElement)return;const n=Math.abs(r.target.getBoundingClientRect()[t.value.direction]-r[t.value.client]),e=f.value[t.value.offset]/2,u=(n-e)*100*p.value/a.value[t.value.offset];s.wrapElement[t.value.scroll]=u*s.wrapElement[t.value.scrollSize]/100},P=r=>{r.stopImmediatePropagation(),v=!0,document.addEventListener("mousemove",T),document.addEventListener("mouseup",g),h=document.onselectstart,document.onselectstart=()=>!1},T=r=>{if(!a.value||!f.value||v===!1)return;const n=d.value[t.value.axis];if(!n)return;const e=(a.value.getBoundingClientRect()[t.value.direction]-r[t.value.client])*-1,u=f.value[t.value.offset]-n,S=(e-u)*100*p.value/a.value[t.value.offset];s.wrapElement[t.value.scroll]=S*s.wrapElement[t.value.scrollSize]/100},g=()=>{v=!1,d.value[t.value.axis]=0,document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",g),N(),l&&(o.value=!1)},w=()=>{l=!1,o.value=!!c.size},C=()=>{l=!0,o.value=v};Y(()=>{N(),document.removeEventListener("mouseup",g)});const N=()=>{document.onselectstart!==h&&(document.onselectstart=h)};return q(()=>{F(s.scrollbarElement,"mousemove",w),F(s.scrollbarElement,"mouseleave",C)}),Y(()=>{K(s.scrollbarElement,"mousemove",w),K(s.scrollbarElement,"mouseleave",C)}),(r,n)=>(E(),R(ae,{name:"fz-scrollbar-fade"},{default:G(()=>[ee(O("div",{ref_key:"instance",ref:a,class:A(["fz-scrollbar__bar",{[`is-${t.value.key}`]:!!t.value.key}]),onMousedown:k},[O("div",{ref_key:"thumb",ref:f,class:"fz-scrollbar__thumb",style:W(_.value),onMousedown:H},null,36)],34),[[te,r.always||o.value]])]),_:1}))}}),we={always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}},Se=$({__name:"bar",props:we,setup(m,{expose:c}){const s=m,a=i(0),f=i(0);return c({handleScroll:o=>{if(o){const v=o.offsetHeight-b,l=o.offsetWidth-b;f.value=o.scrollTop*100/v*s.ratioY,a.value=o.scrollLeft*100/l*s.ratioX}}}),(o,v)=>(E(),J(le,null,[j(I,{move:a.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),j(I,{move:f.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}}),ze={height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:[String,Object,Array],default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20},id:String,role:String,ariaLabel:String,ariaOrientation:{type:String}},Ee={scroll:({scrollTop:m,scrollLeft:c})=>[m,c].every(z)},x="FzScrollbar",_e=$({name:x,__name:"scrollbar",props:ze,emits:Ee,setup(m,{expose:c,emit:s}){const a=m,f=s;let d,o;const v=i(),l=i(),h=i(),t=i("0"),_=i("0"),p=i(),H=i(1),k=i(1),P=y(()=>{const e={};return a.height&&(e.height=U(a.height)),a.maxHeight&&(e.maxHeight=U(a.maxHeight)),[a.wrapStyle,e]}),T=y(()=>[a.wrapClass,"fz-scrollbar__wrap",{"fz-scrollbar__wrap--hidden-default":!a.native}]),g=y(()=>["fz-scrollbar__view",a.viewClass]),w=()=>{var e;l.value&&((e=p.value)==null||e.handleScroll(l.value),f("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function C(e,u){l.value&&(de(e)?l.value.scrollTo(e):z(e)&&z(u)&&l.value.scrollTo(e,u))}const N=e=>{if(!z(e)){V(x,"value must be a number");return}l.value.scrollTop=e},r=e=>{if(!z(e)){V(x,"value must be a number");return}l.value.scrollLeft=e},n=()=>{if(!l.value)return;const e=l.value.offsetHeight-b,u=l.value.offsetWidth-b,S=e**2/l.value.scrollHeight,M=u**2/l.value.scrollWidth,B=Math.max(S,a.minSize),L=Math.max(M,a.minSize);H.value=S/(e-S)/(B/(e-B)),k.value=M/(u-M)/(L/(u-L)),_.value=B+b<e?`${B}px`:"",t.value=L+b<u?`${L}px`:""};return X(()=>a.noresize,e=>{e?(d==null||d(),o==null||o()):({stop:d}=oe(h,n),o=se("resize",n))},{immediate:!0}),X(()=>[a.maxHeight,a.height],()=>{a.native||D(()=>{var e;n(),l.value&&((e=p.value)==null||e.handleScroll(l.value))})}),re(Q,ne({scrollbarElement:v,wrapElement:l})),q(()=>{a.native||D(()=>{n()})}),ie(()=>n()),c({wrapRef:l,update:n,scrollTo:C,setScrollTop:N,setScrollLeft:r,handleScroll:w}),(e,u)=>(E(),J("div",{ref_key:"scrollbarRef",ref:v,class:"fz-scrollbar"},[O("div",{ref_key:"wrapRef",ref:l,class:A(T.value),style:W(P.value),onScroll:w},[(E(),R(ue(e.tag),{id:e.id,ref_key:"resizeRef",ref:h,class:A(g.value),style:W(e.viewStyle),role:e.role,"aria-label":e.ariaLabel,"aria-orientation":e.ariaOrientation},{default:G(()=>[ce(e.$slots,"default")]),_:3},8,["id","class","style","role","aria-label","aria-orientation"]))],38),e.native?fe("",!0):(E(),R(Se,{key:0,ref_key:"barRef",ref:p,height:_.value,width:t.value,always:e.always,"ratio-x":k.value,"ratio-y":H.value},null,8,["height","width","always","ratio-x","ratio-y"]))],512))}}),Ce=he(_e);export{Ce as F};
