import{h,g as x,a2 as A,a6 as H,a7 as P,a5 as Z,d as j,o as f,b as z,w as D,a8 as G,k as R,n as B,l as s,N as $,c as C,H as W,e as V,a9 as X,I as q,t as S,F as J,a as K,aa as Q,T as U}from"./framework.18dad991.js";import{b as Y,w as _,c as M,d as ee}from"./dom.c46d6c72.js";import{u as te,a as ne,F as E}from"./index.5a5e873d.js";import{I as se}from"./index.c49ae5b1.js";import{i as oe}from"./index.8f87f219.js";const F=h(0),ae=()=>{const e=te("zIndex",2e3),o=x(()=>e.value+F.value);return{initialZIndex:e,currentZIndex:o,nextZIndex:()=>(F.value++,o.value)}},le={message:{type:[String,Object],default:()=>null},type:{type:String,default:"default"},closable:Boolean,duration:{type:Number,default:2500},round:Boolean,icon:{type:Object,default:()=>null},color:String,background:String,offset:{type:Number,default:20},placement:{type:String,default:"top"},zIndex:Number,closeBtn:{type:[String,Object],default:()=>null},onClose:{type:Function,default:()=>null}},re=["primary","success","info","warning","error","default"],i=A({}),T=e=>e.props.placement,w=e=>{const o=T(e);return i[o].findIndex(a=>a.uid==e.uid)},O=e=>e.vnode.el.offsetHeight+16,ce=e=>{const o=w(e),a=T(e);if(!(o<0))for(let l=o+1;l<i[a].length;l++){const u=i[a][l];u.exposed.offsetVal.value-=O(e)}},ie=e=>{ce(e);const o=T(e);i[o].splice(w(e),1)},ue=(e,o)=>{const a=n=>{const t=T(n);i[t]?i[t].push(n):i[t]=[n]},l=n=>{let t=n.offset||20;const r=i[n.placement?n.placement:o==="message"?"top":"top-right"];return r&&r.forEach(y=>{t+=O(y)}),t},u=n=>{const t=H(e,n),r=document.createElement("div");return P(t,r),document.body.appendChild(r.firstElementChild),t.component},d=n=>{const t=u(n);return a(t),t.proxy},g=n=>{const t={duration:2500,placement:o==="message"?"top":"top-right",offset:l(n),...n};return Y(t.duration)||(t.duration=2500,_(`Fz${o}`,"Parameters `duration` is not a number.The default value has been used 2500.")),t},v=n=>{const t=M(n)?{message:n}:n;return d(g(t))};return re.forEach(n=>{v[n]=t=>d(g({message:t,type:n}))}),{Message:v}},de=(e,o)=>{const a=ne(o),l=Z(),{nextZIndex:u}=ae(),d=h(!0),g=x(()=>[a.b(),a.m(e.type),a.m(e.placement),a.is("round",e.round)]),v=x(()=>({[a.cssVarBlockName("color")]:e.color,[a.cssVarBlockName("background")]:e.background,[a.cssVarBlockName("z-index")]:ee(e.zIndex)?u():e.zIndex})),n=x(()=>e.placement.includes("top")),t=h(e.offset);let r;const y=b=>{var L;d.value=!1,(L=e==null?void 0:e.onClose)==null||L.call(e,b),clearTimeout(r)},N=()=>{ie(l)},k=()=>{l.vnode.el&&l.vnode.el.parentElement.removeChild(l.vnode.el)},I=()=>{e.duration>0&&(r=setTimeout(()=>{y()},e.duration))};I();const c=x(()=>{const b={};return e.placement.includes("bottom")?b.bottom=t.value+"px":b.top=t.value+"px",b});return{classList:g,styleList:v,visible:d,isPosition:n,offsetStyle:c,offsetVal:t,ns:a,onBeforeLeave:N,onAfterLeave:k,clearTimer:()=>{r&&clearTimeout(r)},startTime:()=>{I()},handelClose:y}},me=j({name:"FzMessage",__name:"message",props:le,setup(e,{expose:o}){const a=e,{ns:l,classList:u,styleList:d,visible:g,isPosition:v,offsetStyle:n,offsetVal:t,onBeforeLeave:r,onAfterLeave:y,clearTimer:N,startTime:k,handelClose:I}=de(a,"message");return o({offsetVal:t}),(c,m)=>(f(),z(U,{mode:"out-in",appear:"",name:s(l).b(`fade-${s(v)?"top":"bottom"}`),onBeforeLeave:s(r),onAfterLeave:s(y)},{default:D(()=>[G(R("div",{class:B(s(u)),style:$([s(n),s(d)]),onMouseleave:m[1]||(m[1]=(...p)=>s(k)&&s(k)(...p)),onMouseenter:m[2]||(m[2]=(...p)=>s(N)&&s(N)(...p))},[c.icon?(f(),C("div",{key:0,class:B(s(l).e("before_icon"))},[W(s(E),{icon:c.icon,size:16},null,8,["icon"])],2)):V("",!0),X(c.message)?(f(),z(q(c.message),{key:1})):(f(),C("div",{key:2,class:B(s(l).e("text"))},S(c.message),3)),c.closable?(f(),C("div",{key:3,class:B(s(l).e("close")),onClick:m[0]||(m[0]=(...p)=>s(I)&&s(I)(...p))},[s(M)(c.closeBtn)?(f(),C(J,{key:0},[K(S(c.closeBtn),1)],64)):(f(),z(s(E),{key:1,icon:s(se),size:15},null,8,["icon"]))],2)):V("",!0)],38),[[Q,s(g)]])]),_:1},8,["name","onBeforeLeave","onAfterLeave"]))}}),{Message:fe}=ue(me,"message"),be=oe(fe,"FzMessage");export{be as F,ae as u};
